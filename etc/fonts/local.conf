<?xml version="1.0"?>
<!DOCTYPE fontconfig SYSTEM "fonts.dtd">
<fontconfig>

<!-- 原有字體映射配置（保持不變） -->
<match target="pattern">
  <test name="family">
    <string>system-ui</string>
  </test>
  <edit name="family" mode="prepend" binding="strong">
    <string>sans-serif</string>
  </edit>
</match>

<!-- 渲染設置（從Arch Linux維基照搬） -->
<match target="font">
  <edit mode="assign" name="autohint">
    <bool>false</bool>
  </edit>
  <edit mode="assign" name="hinting">
    <bool>true</bool>
  </edit>
  <edit mode="assign" name="hintstyle">
    <const>hintslight</const>
  </edit>
  <edit mode="assign" name="antialias">
    <bool>true</bool>
  </edit>
  <edit mode="assign" name="lcdfilter">
    <const>lcddefault</const>
  </edit>
  <edit name="rgba" mode="assign">
    <const>rgb</const>
  </edit>
</match>

<!-- 排除嵌入位圖字體（Twemoji除外） -->
<match target="font">
  <test name="family" compare="not_eq">
    <string>Twemoji</string>
  </test>
  <edit name="embeddedbitmap" mode="assign">
    <bool>false</bool>
  </edit>
</match>

<!-- 排除傳統位圖字體 -->
<selectfont>
  <rejectfont>
    <pattern>
      <patelt name="family"><string>Fixed</string></patelt>
    </pattern>
  </rejectfont>
</selectfont>

<!-- Noto字體全覆蓋（sans-serif/serif/monospace優先Noto系列） -->
<alias binding="strong">
  <family>sans-serif</family>
  <prefer>
    <family>Noto Sans</family>
    <family>Noto Sans CJK SC</family>
    <family>Noto Sans CJK TC</family>
    <family>Noto Sans CJK JP</family>
    <family>Noto Sans Arabic</family>
    <family>Noto Color Emoji</family>
    <family>Noto Sans Symbols</family>
    <family>Noto Sans Symbols 2</family>
  </prefer>
</alias>

<alias binding="strong">
  <family>serif</family>
  <prefer>
    <family>Noto Serif</family>
    <family>Noto Serif CJK SC</family>
    <family>Noto Serif CJK TC</family>
    <family>Noto Serif CJK JP</family>
    <family>Noto Color Emoji</family>
    <family>Noto Sans Arabic</family>
  </prefer>
</alias>

<alias binding="strong">
  <family>monospace</family>
  <prefer>
    <family>Noto Sans Mono</family>
    <family>Noto Sans Mono CJK SC</family>
    <family>Noto Sans Mono CJK TC</family>
    <family>Noto Color Emoji</family>
  </prefer>
</alias>

<!-- 用戶特定字體偏好（僅自定義字體，Noto自動fallback） -->
<match target="pattern">
  <test name="family">
    <string>sans-serif</string>
  </test>
  <edit name="family" mode="prepend" binding="strong">
    <string>微信公众号：数码迷（ID：wanshuma）</string>
  </edit>
</match>

<match target="pattern">
  <test name="family">
    <string>serif</string>
  </test>
  <edit name="family" mode="prepend" binding="strong">
    <string>霞鶩文楷 TC</string>
  </edit>
</match>

<match target="pattern">
  <test name="family">
    <string>monospace</string>
  </test>
  <edit name="family" mode="prepend" binding="strong">
    <string>JetBrains Maple Mono</string>
  </edit>
</match>

<!-- 中文別名映射 -->
<alias binding="strong">
  <family>黑體</family>
  <accept><family>黑体</family></accept>
</alias>
<alias binding="strong">
  <family>FangSong</family>
  <accept><family>FangSong_GB2312</family></accept>
</alias>
<alias binding="strong">
  <family>仿宋</family>
  <accept><family>仿宋_GB2312</family></accept>
</alias>
<alias binding="strong">
  <family>KaiTi</family>
  <accept><family>KaiTi_GB2312</family></accept>
</alias>
<alias binding="strong">
  <family>KaiTi SC</family>
  <accept><family>KaiTi_GB2312</family></accept>
</alias>
<alias binding="strong">
  <family>楷体</family>
  <accept><family>楷体_GB2312</family></accept>
</alias>

</fontconfig>

